var QueryString=function(){for(var query_string={},query,vars=window.location.search.substring(1).split("&"),i=0;i<vars.length;i++){var pair=vars[i].split("=");if(void 0===query_string[pair[0]])query_string[pair[0]]=decodeURIComponent(pair[1]);else if("string"==typeof query_string[pair[0]]){var arr=[query_string[pair[0]],decodeURIComponent(pair[1])];query_string[pair[0]]=arr}else query_string[pair[0]].push(decodeURIComponent(pair[1]))}return query_string}(),url=window.location.href;if(url.search(/<script[\s\S]*?>[\s\S]*?<\/script>/gi)>-1){var newurl=url.replace(/<script[\s\S]*?>[\s\S]*?<\/script>/gi,"");window.location.href=newurl}else if(url.search(/%3Cscript[\s\S]*?%3E[\s\S]*?%3C\/script%3E/gi)>-1){var newurl=url.replace(/%3Cscript[\s\S]*?%3E[\s\S]*?%3C\/script%3E/gi,"");window.location.href=newurl}var API_HOST="https://mtrhighspeedtravelcmsuat.azurewebsites.net/",LIKE_API_ALL=API_HOST+"Like/GetLikeByCategroy",LIKE_API_GET=API_HOST+"Like/GetLikeByCategroyById",LIKE_API_POST=API_HOST+"Like/likeArticle",SHARE_API_POST=API_HOST+"Share/InsertShareLog",CLICK_API_POST=API_HOST+"ArticleClickRate/InsertClickRate",MTR=new Vue({el:"#hsr",data:{pageLoad:!1,pagetitle:"",pageid:"",breadcrumb:"",depth1:"",depth1link:"",depth2:"",depth2link:"",text:{siteUrl:"https://www.highspeed.mtr.com.hk/",siteName:"高鐵遊攻略",siteHash:"高鐵遊攻略",siteKeyword:"高速鐵路, High Speed Rail, MTR, 港鐵, 熱點推介, 主題旅遊, 行程推介, 高鐵旅遊專家",siteDescription:"全長26公里的高速鐵路(香港段)以西九龍為起點，連接超過25,000公里的國家高鐵網絡。無論商務出行，抑或旅遊探親，高鐵帶給你一個舒適可靠的旅程，讓你以嶄新旅遊模式發掘更多更遠的地方！全長26公里的高速鐵路(香港段)以西九龍為起點，連接超過25,000公里的國家高鐵網絡。無論商務出行，抑或旅遊探親，高鐵帶給你一個舒適可靠的旅程，讓你以嶄新旅遊模式發掘更多更遠的地方！全長26公里的高速鐵路(香港段)以西九龍為起點，連接超過25,000公里的國家高鐵網絡。無論商務出行，抑或旅遊探親，高鐵帶給你一個舒適可靠的旅程，讓你以嶄新旅遊模式發掘更多更遠的地方！全長26公里的高速鐵路(香港段)以西九龍為起點，連接超過25,000公里的國家高鐵網絡。無論商務出行，抑或旅遊探親，高鐵帶給你一個舒適可靠的旅程，讓你以嶄新旅遊模式發掘更多更遠的地方！全長26公里的高速鐵路(香港段)以西九龍為起點，連接超過25,000公里的國家高鐵網絡。無論商務出行，抑或旅遊探親，高鐵帶給你一個舒適可靠的旅程，讓你以嶄新旅遊模式發掘更多更遠的地方！全長26公里的高速鐵路(香港段)以西九龍為起點，連接超過25,000公里的國家高鐵網絡。無論商務出行，抑或旅遊探親，高鐵帶給你一個舒適可靠的旅程，讓你以嶄新旅遊模式發掘更多更遠的地方！全長26公里的高速鐵路(香港段)以西九龍為起點，連接超過25,000公里的國家高鐵網絡。無論商務出行，抑或旅遊探親，高鐵帶給你一個舒適可靠的旅程，讓你以嶄新旅遊模式發掘更多更遠的地方！全長26公里的高速鐵路(香港段)以西九龍為起點，連接超過25,000公里的國家高鐵網絡。無論商務出行，抑或旅遊探親，高鐵帶給你一個舒適可靠的旅程，讓你以嶄新旅遊模式發掘更多更遠的地方！",fcopy:"&copy; 香港鐵路有限公司2020",btnDetail:"了解更多",btnDetailCont:"更多",btnBackTop:"返回頁面頂部",btnGoPrev:"返回",btnLoadmore:"更多結果",share_wechat_desc:"請掃瞄此QR Code",share_wechat_btn1:"複製網址",share_wechat_btn2:"開啟微信",searchbox:"輸入關鍵字",searchboxPlan:"輸入關鍵字",searchBtn:"搜尋",searchKeyword:"輸入景點關鍵字",searchNoResult:"抱歉，沒有找到相關的搜索結果。",searchPleaseInput:"請輸入關鍵字",selectDefault:"類別",selectAll:"全部類別",selectAllArea:"地區",day:["第一天","第二天","第三天","第四天","第五天","第六天","第七天","第八天","第九天","第十天","第十一天","第十二天","第十三天","第十四天","第十五天","第十六天","第十七天","第十八天","第十九天","第二十天"],detailBtmBannerTit:'立即報名或查詢相關<br class="view767"/>高鐵行程資訊',languageRemark:["此網頁只提供繁體內容","Contents in Traditional Chinese only"]},listShow:6,listTotal:1e3,articleId:"",articleCate:[],articleList:[],articleTitle:"",articleDetail:[],articleLike:[],planDay:"",max:"",searchkeyword:"",searchkeywordAuto:"",searchmessage:"",dropSelected:"all",dropSelectedDepth:"",topmenu:[],banners:[],footmenu:[],agency:[],highlights:[],textLimitTitle:0,textLimitPlanHotspotTitle:0,textLimitHomeLatestTitle:0,textLimitHomeLatestDesc:0,textLimitHomeLatestDescFirst:0,selected:"",selectedDetail:[],hotspotDetailinMap:"",errorImg:"./images/common/blank/"},created:function(){$.getJSON(LIKE_API_ALL+"?_="+(new Date).getTime()).then(function(data){this.articleLike=data}.bind(this)),$.getJSON("./data/agency-list.json").then(function(data){this.agency=data}.bind(this))},watch:{pageLoad:function(val,oldVal){val&&(MTR.loading(),MTR.hsrDrop(),MTR.updateMeta(),MTR.loadMore(),MTR.aside())},searchkeyword:function(val,oldVal){val&&(MTR.searchkeywordAuto=val)}},mounted:function(){var browserSet=(rootEl=$("body"),on_a11y="a11y-on",off_a11y="a11y-off",rootEl.addClass(off_a11y),rootEl.bind("mousedown",(function(){rootEl.addClass(off_a11y).removeClass(on_a11y)})),set_a11y=void rootEl.bind("keydown",(function(event){9===event.keyCode&&rootEl.addClass(on_a11y).removeClass(off_a11y)})),isIE=!1,ua=window.navigator.userAgent,old_ie=ua.indexOf("MSIE "),new_ie=ua.indexOf("Trident/"),(old_ie>-1||new_ie>-1)&&(isIE=!0),set_ms=void(isIE&&rootEl.addClass("ie11")),isMobile=!1,void(set_mobile=void((/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|ipad|iris|kindle|Android|Silk|lge |maemo|midp|mmp|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i.test(navigator.userAgent)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(navigator.userAgent.substr(0,4)))&&(isMobile=!0,rootEl.addClass("device-mobile"))))),rootEl,on_a11y,off_a11y,set_a11y,set_ms,isIE,ua,old_ie,new_ie,set_mobile,isMobile,nav=(el=$(".wrap"),btn=$(".btn-nav"),logo=$(".logo_hsr"),active="nav-active",overay=$(".nav-area"),opened="open-child",void(n={init:function(){btn.on("click",(function(){n.check()})),overay.on("click",(function(){n.close()})),$(".btn-skip-to-nav").on("click",(function(){$(this).blur(),btn.focus(),n.check()})),$(".btn-skip-to-cont").on("click",(function(){$(this).blur(),n.close(),n.scroll("#a-primary-focus"),setTimeout((function(){$("#a-primary-focus").parent().find("a").first().focus()}),800)})),$(".btn-skip-to-foot").on("click",(function(){$(this).blur(),n.close(),n.scroll("#a-footer-focus"),setTimeout((function(){$(".footer-nav a").first().focus()}),800)})),n.m_init()},scroll:function(target){var gab=$("header").height();$("html, body").animate({scrollTop:$(target).offset().top-gab},500)},check:function(){var hasclass=el.hasClass(active)?n.close():n.open()},open:function(){el.addClass(active),n.changeLogo("open"),btn.bind("keydown",(function(event){event.shiftKey&&9==event.keyCode&&n.close()})),btn.attr("aria-expanded","true"),$("#gnb .gnb_menu > ul > li a").last().bind("keydown",(function(event){event.shiftKey||9!==event.keyCode||n.close()})),lihide=setTimeout((function(){el.addClass("nav-li-show-over")}),4e3),$(document).bind("keydown",(function(event){27===event.keyCode&&el.hasClass(active)&&(n.close(),btn.focus())}))},close:function(){btn.attr("aria-expanded","false"),el.removeClass(active),clearTimeout(lihide),el.removeClass("nav-li-show-over"),n.changeLogo("close"),$(window).width()<1e3&&($("#gnb .has-child, .drop-list .has-child").find(">ul").css("display","none"),$("#gnb .has-child, .drop-list .has-child").removeClass(opened)),btn.blur()},changeLogo:function(status){},m_init:function(){var btmShowSub='<div class="btn-show-submenu blind-txt" tabindex="0" aria-expanded="false"></div>';setTimeout((function(){function toggleMobSubMenu(crr){var anchor=crr.closest("li"),target=$("#gnb .has-child, .drop-list .has-child");anchor.hasClass(opened)?(target.find(">ul").slideUp(300),target.find("> a").attr("aria-expanded","false"),target.find(".btn-show-submenu").attr("aria-expanded","false"),setTimeout((function(){target.removeClass(opened)}),300)):(target.removeClass(opened),target.find("> ul").slideUp(300),target.find("> a").attr("aria-expanded","false"),target.find(".btn-show-submenu").attr("aria-expanded","false"),anchor.addClass(opened).find(">ul").slideDown(300),crr.attr("aria-expanded","true"),crr.parent().find("> a").attr("aria-expanded","true"))}var windowType;$.each($("#gnb .has-child, .drop-list .has-child"),(function(){$(this).find(".depth1-wrap").append(btmShowSub)})),$(".btn-show-submenu").bind({click:function(){toggleMobSubMenu($(this))},keydown:function(e){13===e.keyCode&&toggleMobSubMenu($(this))},focus:function(){$(this).closest("li").addClass("key-focus")},focusout:function(){$(this).closest("li").removeClass("key-focus")}});var $wind=$(window),desktopFunctions=function(){$("#gnb .has-child, .drop-list .has-child").find(".depth1").attr("tabindex","")},mobileFunctions=function(){$("#gnb .has-child, .drop-list .has-child").find(".depth1").attr("tabindex","-1")},mobileCheck=function(){var window_w,currType=$wind.width()<1e3?"mobile":"desktop";windowType!=currType&&("mobile"==(windowType=currType)?mobileFunctions():desktopFunctions())},resizeTimer;mobileCheck(),$wind.resize((function(){resizeTimer&&clearTimeout(resizeTimer),resizeTimer=setTimeout(mobileCheck,300)}))}),1e3)}}).init()),el,btn,logo,active,overay,opened,lihide,n,utilFontZoom=function(){var rootEl=$("body"),btn=$(".zoom-size"),cookie="font-size",zoom={init:function(){zoom.default(),zoom.select()},default:function(){var current=sessionStorage.getItem(cookie);null!=current?zoom.set(current):zoom.set("m")},select:function(){btn.on("click",(function(){var size=$(this).data("size");zoom.set(size),MTR.checkLineHeight()}))},set:function(size){btn.removeClass("active"),$('.zoom-size[data-size="'+size+'"]').addClass("active"),rootEl.removeClass("font-size-s font-size-m font-size-l").addClass("font-size-"+size),sessionStorage.setItem(cookie,size)}};zoom.init()}(),btnBackToTop=function(){var el=$(".btn-back-to-top"),backtop={init:function(){backtop.click(),backtop.aside()},click:function(){el.on("click",(function(e){e.preventDefault(),smoothScroll($("body"),2,500),setTimeout((function(){$(".btn-nav").focus()}),500)}))},aside:function(){$(window).on("scroll",(function(){var sidelink=$(".external-link"),agencyDetail=$(".ex-item-detail"),scrollH,elTop;$(window).scrollTop()+$(window).height()>el.offset().top?(sidelink.removeClass("afix-on"),agencyDetail.addClass("reach-foot")):(sidelink.addClass("afix-on"),agencyDetail.removeClass("reach-foot"))}))}};backtop.init()}(),btmWave=function(){var unit=100,canvas,context,height,width,xAxis,yAxis,draw,timing;function init(el,w,h){(canvas=document.getElementById(el)).width=w,canvas.height=h,context=canvas.getContext("2d"),height=canvas.height,width=canvas.width,xAxis=Math.floor(height/2),yAxis=0,draw()}function pause(el){el.remove()}function draw(){context.clearRect(0,0,width,height);var crrW=$(window).width();drawWave("#F58025",1,crrW>1e3?3:crrW<700?1.5:2,0),draw.seconds=draw.seconds+.003,draw.t=draw.seconds*Math.PI,timing=setTimeout(draw,35)}function drawWave(fillcolor,alpha,zoom,delay){context.fillStyle=fillcolor,context.globalAlpha=alpha,context.beginPath(),drawSine(draw.t/.5,zoom,delay),context.lineTo(width+10,height),context.lineTo(0,height),context.closePath(),context.fill()}function drawSine(t,zoom,delay){var x=t,y=Math.sin(x)/zoom;context.moveTo(yAxis,100*y+xAxis);var crrW=$(window).width(),sin;for(sin=crrW>1e3?3:crrW<700?4:4.5,i=yAxis;i<=width+10;i+=10)x=t+(-yAxis+i)/100/zoom,y=Math.sin(x-delay)/sin,context.lineTo(i,100*y+xAxis)}draw.seconds=0,draw.t=0;var currentWave=0,crrW=$(window).width(),h;h=crrW>1e3?142:crrW<700?80:100,currentWave++,$("#canvas-container").append('<canvas id="btm-wave-'+currentWave+'" width="100%" style="width:100%;height:'+h+'px"></canvas>'),init("btm-wave-"+currentWave,crrW,h),$(window).resize((function(){clearTimeout(timing),pause($("#btm-wave-"+currentWave));var crrW=$(window).width(),h;h=crrW>1e3?142:crrW<700&&crrW<=1e3?80:100,currentWave++,$("#canvas-container").append('<canvas id="btm-wave-'+currentWave+'"></canvas>'),init("btm-wave-"+currentWave,crrW,h)}))}();function smoothScroll(x,s,c){$("html, body").animate({scrollTop:x.offset().top+s},c)}$("input[name=keyword]").bind({focusin:function(){$(".search-keyword").removeClass("off-autosearch"),$(".search-list-auto").removeClass("load-list")},keydown:function(){$(".search-keyword").removeClass("off-autosearch");var crr=$(".search-list-auto li.selected"),keymove={handle:function(e){if(40===event.keyCode){if(crr.length>0)return void(crr.next().is("li")&&(crr.next().addClass("selected"),crr.first().removeClass("selected"),keymove.gettit()));$(".search-list-auto li").first().addClass("selected"),keymove.gettit()}38===event.keyCode&&crr.length>0?crr.prev().is("li")?(crr.prev().addClass("selected"),crr.last().removeClass("selected"),keymove.gettit()):crr.removeClass("selected"):13===event.keyCode&&crr.length>0&&(MTR.searchkeywordAuto=keymove.gettit(),crr.hasClass("redirect")&&(window.location.href=crr.data("link")),crr.hasClass("showarea")&&MTR.showHotspot([crr.data("type"),crr.data("id")]))},gettit:function(){var txt;return $(".search-list-auto li.selected").find(".auto-result-tit").html()}};keymove.handle()}});var breaktarget=$("#amap_wrap canvas, .amap-layers"),topbannerSubScroll_init;function scrolling(type){"up"==type?$(window).scrollTop($(document).scrollTop()+40):"down"==type&&$(window).scrollTop($(document).scrollTop()-40)}breaktarget.bind("mousewheel",(function(){return!1})),breaktarget.bind("DOMMouseScroll",(function(e){return e.originalEvent.detail>0?scrolling("up"):scrolling("down"),!1})),breaktarget.bind("mousewheel",(function(e){return e.originalEvent.wheelDelta<0?scrolling("up"):scrolling("down"),!1})),setTimeout((function(){MTR.textLimitUpdate(),$(window).resize((function(){MTR.textLimitUpdate()}))})),initScrollTop=$(window).scrollTop(),$(".topbanner-img").css({"background-position":"center -"+initScrollTop/5+"px"}),$(window).scroll((function(){var scrollTop=$(window).scrollTop();$(".topbanner-img").css({"background-position":"center -"+scrollTop/5+"px"})}));var initScrollTop},methods:{loading:function(){var status;if(sessionStorage.getItem("PAGE_LOAD"))$("#hsr-loading").remove();else{var $this=$(".loading-msg_txt"),countTo=100;$({countNum:$this.text()}).animate({countNum:100},{duration:400,easing:"linear",step:function(){$this.text(Math.floor(this.countNum)+"%")},complete:function(){$this.text(this.countNum+"%"),setTimeout((function(){$("#hsr-loading").fadeOut()}),500),sessionStorage.setItem("PAGE_LOAD",1)}})}},imgError:function(target){var type=target[1],image="./images/common/blank/",size,table=[{holder:"hotspotlist",size:"258x172"},{holder:"hotspotDetail",size:"470x646"},{holder:"hotspotDetail_m",size:"767x474"}],cnt=0;for(let i=0;i<table.length;i++){var el=table[i];type==el.holder&&(cnt++,size=el.size)}cnt>0?$(target[0]).attr("src",image+size+".jpg"):$(target[0]).attr("src",image+"blank.jpg")},textLimit:function(value){if(!value)return"";var limit=this.textLimitTitle;return MTR.textReturn(value,limit)},textLimitPlanHotspot:function(value){if(!value)return"";var limit=this.textLimitPlanHotspotTitle;return MTR.textReturn(value,limit)},textLimitHomeLatestTit:function(value){if(!value)return"";var limit=this.textLimitHomeLatestTitle;return MTR.textReturn(value[0],limit)},textLimitHomeLatest:function(value){if(!value)return"";var limit=this.textLimitHomeLatestDesc;return MTR.textReturn(value[0],limit)},textReturn:function(value,limit){return value.length>limit?value.slice(0,limit)+"...":value},textLimitUpdate:function(){var crrW=$(window).width();crrW>1300?(MTR.textLimitTitle=22,MTR.textLimitPlanHotspotTitle=16,MTR.textLimitHomeLatestTitle=28,MTR.textLimitHomeLatestDesc=50,MTR.textLimitHomeLatestDescFirst=70):crrW>1e3&&crrW<=1300?(MTR.textLimitTitle=16,MTR.textLimitPlanHotspotTitle=16,MTR.textLimitHomeLatestTitle=20,MTR.textLimitHomeLatestDesc=25,MTR.textLimitHomeLatestDescFirst=40):crrW>750&&crrW<=1e3?(MTR.textLimitTitle=17,MTR.textLimitPlanHotspotTitle=14,MTR.textLimitHomeLatestTitle=18,MTR.textLimitHomeLatestDesc=20,MTR.textLimitHomeLatestDescFirst=30):crrW<700&&(MTR.textLimitTitle=22,MTR.textLimitPlanHotspotTitle=11,MTR.textLimitHomeLatestTitle=28,MTR.textLimitHomeLatestDesc=37,MTR.textLimitHomeLatestDescFirst=60)},updateMeta:function(){var title=MTR.text.siteName+" > "+MTR.pagetitle;MTR.cateList?$("title").html(title+" > "+MTR.cateList):MTR.articleTitle?$("title").html(title+" > "+MTR.articleTitle):$("title").html(title)},qr:function(txt,tar){$(tar).html().length<1&&$(tar).qrcode({render:"image",text:txt})},popupOpen:function(prevFocus,content,type){var popupMask='<div class="hsr-mask"></div>',popupCont='<div class="hsr-popup"><div class="hsr-popup-in"><div class="hsr-popup-content"><a href="javascript:;" class="btn-close-popup"></a></div></div></div>';"hotspot"==type&&(prevFocus=$('[data-hotspot="'+prevFocus+'"]').find(".article-list_btn a"),$.each(MTR.articleDetail[0].plan[0].path,(function(index,item){item.hotspot.id==content&&(content="",content+=item.hotspot.name,content+=item.hotspot.hotspotDescription,content+=item.hotspot.howToGo,content+=item.hotspot.location)}))),$("body").append(popupMask).append(popupCont),$(".hsr-mask").fadeIn(300),content&&($(".hsr-popup:not(.hotspot) .hsr-popup-content").append(content),$(".btn-close-popup").focus()),MTR.popupClose(prevFocus),$(document).bind("keydown",(function(event){27===event.keyCode&&MTR.popupExit(prevFocus)}))},popupClose:function(prevFocus){$(".btn-close-popup").on("click",(function(){MTR.popupExit(prevFocus)}))},popupExit:function(prevFocus){$(".hsr-mask, .hsr-popup:not(.hotspot)").fadeOut(300,(function(){$(this).remove()})),prevFocus&&prevFocus.focus()},countClick:function(target){var clickRate={init:function(){clickRate.click()},click:function(){clickRate.post(target[0],target[1])},post:function(cate,id){var like={Category:cate,CategoryId:id};$.ajax({type:"POST",url:CLICK_API_POST,dataType:"json",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:like,crossDomain:!0,success:function(data){}})}};clickRate.init()},countlike:function(target){var heart={init:function(){heart.click()},click:function(){heart.post(target[0],target[1])},post:function(cate,id){var like={category:cate,CategoryId:id};$.ajax({type:"POST",url:LIKE_API_POST,dataType:"json",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:like,crossDomain:!0,success:function(data){var el=$(".amap-info-content .btn-like[data-article-section="+data.Category+"][data-article-id="+data.CategoryId+"], .hotspot-list-item .btn-like[data-article-section="+data.Category+"][data-article-id="+data.CategoryId+"]");el.addClass("i-like"),el.find(".like-count").html(data.TotalLike);for(let idx=0;idx<MTR.articleLike.length;idx++){const el=MTR.articleLike[idx];if(el.category==cate){var cnt=0;for(let di=0;di<el.detail.length;di++){const items=el.detail[di];items.CategoryId==data.CategoryId&&(cnt++,items.TotalLike=data.TotalLike,items.IsAbleToLike=data.IsAbleToLike)}0==cnt&&el.detail.push({CategoryId:id,IsAbleToLike:0,TotalLike:1})}}}})}};heart.init()},countShare:function(opt){var holder=opt[0],page=opt[1],target=opt[2],type=opt[3];MTR.openShare(type,target);var share={Category:holder,CategoryId:page,Channel:target};$.ajax({type:"POST",url:SHARE_API_POST,dataType:"json",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:share,crossDomain:!0,success:function(data){}})},openShare:function(opt,target){var windowHeight=750,windowWidth=620,alignTop=screen.height/2-375,alignLeft=screen.width/2-310;if("root"==opt){var url=MTR.text.siteUrl;if("Facebook"==target)return void window.open("https://www.facebook.com/sharer/sharer.php?u="+url+"&hashtag=%23"+MTR.text.siteHash,"","top="+alignTop+",left="+alignLeft+",width=620,height=750");if("WhatsApp"==target)return void window.open("https://api.whatsapp.com/send?text="+url+"%0D%0A"+MTR.text.siteName+"%0D%0A"+MTR.text.siteDescription,"","top="+alignTop+",left="+alignLeft+",width=620,height=750");if("WeChat"==target)return void MTR.openShareWeChat(url)}if("crr"==opt){var host=location.hostname;if("hotspot"==MTR.pageid)var sharePath="https://"+host+"/share/"+MTR.pageid+"/"+MTR.pageid+"-article-"+MTR.hotspotDetailinMap[0].HotspotId+".html";else var sharePath="https://"+host+"/share/"+MTR.pageid+"/"+MTR.pageid+"-article-"+MTR.articleId+".html";if("Facebook"==target)return void window.open("https://www.facebook.com/sharer/sharer.php?u="+sharePath+"&hashtag=%23"+MTR.text.siteHash,"","top="+alignTop+",left="+alignLeft+",width=620,height=750");if("WhatsApp"==target)return void window.open("https://api.whatsapp.com/send?text="+sharePath,"","top="+alignTop+",left="+alignLeft+",width=620,height=750");if("WeChat"==target)return void MTR.openShareWeChat(sharePath)}},openShareWeChat:function(url){var content_desktop='<div class="share-wechat type-desktop"><div><div class="qr-wechat"></div><div><figure><img class="share-logo" src="./images/common/logo_wechat.png" alt="'+MTR.text.share_wechat_btn2+'"/></figure><div><p>'+MTR.text.share_wechat_desc+"</p></div></div></div></div>",content_mobile='<div class="share-wechat type-mobile"><div><div><figure><img class="share-logo" src="./images/common/logo_wechat.png" alt="'+MTR.text.share_wechat_btn2+'"/></figure><div><div class="share-info"><p class="copy-url"/><p class="copy-result"/></div><div class="btn-area"><a class="copy-txt">'+MTR.text.share_wechat_btn1+'</a><a class="open-wechat" href="weixin://dl/posts" target="_blank">'+MTR.text.share_wechat_btn2+"</a></div></div></div></div></div>",rootEl=$("body"),btnOpen=$(".sns-wechat");rootEl.hasClass("device-mobile")?MTR.popupOpen(btnOpen,content_mobile):MTR.popupOpen(btnOpen,content_desktop),$(".qr-wechat").qrcode({render:"image",text:url}),$(".copy-url").html(location.href),$(".copy-txt").on("click",(function(){MTR.copyToClipboard($(".copy-url")),$(this).attr("disabled",""),$(".copy-result").html("已複製"),$(".open-wechat").addClass("highlight")}))},copyToClipboard:function(element){var $temp=$("<input>");$("body").append($temp),$temp.val($(element).text()).select(),document.execCommand("copy"),$temp.remove()},gosearch:function(key){return this.dropSelected="all",$(".search-keyword").addClass("off-autosearch"),key?(this.searchkeywordAuto=key,this.searchkeyword=key):this.searchkeyword=this.searchkeywordAuto},goHotspot:function(target){window.location.href=target},goArea:function(target){var page="./hotspot.html?",para;para=target[1]?page+"region="+target[0]+"&city="+target[1]:page+"region="+target,window.location.href=para},showArea:function(target){var type=target[0],id=target[1];"region"==type&&$.each(MTR.articleDetail,(function(i,region){if(region.RegionId==id)return paramUpdate.update("region",id),MTR.dropSelected=1,MTR.selected=region.RegionName,$("#map").attr("data-sort-area",region.RegionId),map.setZoomAndCenter(zoomMin,region.LngLat)})),"city"==type&&$.each(MTR.articleDetail,(function(i,region){$.each(region.City,(function(d,city){if(city.CityId==id)return MTR.dropSelected=2,MTR.selected=city.CityName,map.setZoomAndCenter(zoomMax,city.CityLngLat)}))})),this.searchkeyword="",this.searchkeywordAuto="",$(".hsr-drop").find(".drop-list").slideToggle(300),$(".hsr-drop").toggleClass("drop-open")},showHotspot:function(target){var type=target[0],id=target[1];"city"==type&&$.each(MTR.articleDetail,(function(i,region){$.each(region.City,(function(d,city){if(city.CityId==id)return MTR.dropSelected=2,MTR.selected=city.CityName,MTR.searchkeyword=city.CityName,setTimeout((function(){MTR.searchkeywordAuto=""}),500),map.setZoomAndCenter(zoomMax,city.CityLngLat)}))})),"hotspot"==type&&$.each(MTR.articleDetail,(function(i,region){$.each(region.City,(function(d,city){$.each(city.Hotspot,(function(c,spot){spot.HotspotId==id&&(MTR.searchkeyword=spot.Title,MTR.dropSelected=2,MTR.selected=city.CityName,$("#map").attr("data-sort-area",""),map.setZoomAndCenter(zoomMax,spot.HotspotLngLat),openInfo(spot.HotspotId),setTimeout((function(){showHotspotListFocus(spot.HotspotId),MTR.searchkeywordAuto=""}),500))}))}))})),$(".search-list-auto").find("li").remove()},hsrDrop:function(){var el=$(".hsr-drop");$.each(el,(function(){var wrap=$(this);wrap.find(".drop-list-crr").on("click",(function(){wrap.find(".drop-list").slideToggle(300),wrap.toggleClass("drop-open")})),wrap.find(".drop-list > ul > li .list-txt").bind({click:function(){wrap.addClass("selected")},focusin:function(){wrap.find(".drop-list > ul > li").removeClass("focused"),$(this).closest("li").addClass("focused")}}),$.each(wrap.find(".drop-list > ul > li ul"),(function(){$(this).find("li").last().bind({focusout:function(){wrap.find(".focused").focus()}})})),wrap.find(".drop-list > ul > li:last-child ul li:last-child").bind({focusout:function(){wrap.find(".drop-list").slideToggle(300),wrap.toggleClass("drop-open")}}),wrap.on("mouseleave",(function(){var winW;$(window).width()>1e3&&(wrap.find(".drop-list").slideUp(300),wrap.removeClass("drop-open"))}))}))},dropOption:function(list,idx){if("all"==idx)this.dropSelected="all";else{var id=list[idx].cateId;this.dropSelected=id}this.dropSelectedDepth="1",this.searchkeyword="",this.searchkeywordAuto="",this.dropClickAfter(),this.updateMeta()},dropOptionSub:function(list,idx,crr,clickafter){if("all"==idx)this.dropSelected="all";else{var id=list[idx].subcate[crr];this.dropSelected=id}this.dropSelectedDepth="2",this.searchkeyword="",this.searchkeywordAuto="",0==clickafter||this.dropClickAfter(),this.updateMeta()},dropOptionDay:function(list,idx){this.dropSelected=list[0].plan[idx].day;var el=$(".plan-select-day");el.find(".drop-list").slideToggle(300),el.find(".hsr-drop").toggleClass("drop-open");var gab=$("header").height();$("html, body").animate({scrollTop:$(".detail-item-cont").offset().top-gab},500)},dropClickAfter:function(){$(".external-link").removeAttr("style");var el=$(".sec-cont-search");el.find(".drop-list").slideToggle(300),el.find(".hsr-drop").toggleClass("drop-open")},modelist:function(e){if(40==e.keyCode){var next;if(null===e.target.nextElementSibling)return;e.target.nextElementSibling.focus()}var prev;38==e.keyCode&&(null===e.target.previousElementSibling&&$(".search-keyword input").focus(),e.target.previousElementSibling.focus())},updatelistshow:function(){this.listShow+=6},loadMore:function(){$(window).scroll((function(){var el=$(".btn-loadmore");if(el.length>0){var top=el.offset().top,height;$(window).scrollTop()+$(window).height()-el.height()>top&&($(".external-link").removeAttr("style"),MTR.listShow+=6)}}))},dayPagination:function(target){var crr=new Number(this.dropSelected);if(this.max=this.articleDetail[0].plan.length,"prev"==target)var to=crr-1;if("next"==target)var to=crr+1;this.checkHasHotspot(),this.checkLineHeight();var gab=$("header").height();return $("html, body").animate({scrollTop:$(".detail-item-cont").offset().top-gab},500),this.dropSelected=to},checkHasHotspot:function(){var item=$(".path-list-item");setTimeout((function(){var hasHotspot=$(".has-hotspot");hasHotspot.last().addClass("has-hotspot-last"),hasHotspot.first().addClass("has-hotspot-first");var item=$(".path-list-item"),lastitem=item.last(),nextRoute=lastitem.data("route"),nextHotspot;nextHotspot=lastitem.hasClass("has-hotspot")?"-hotspot":"",item.last().prev().addClass("last-prev-r"+nextRoute+nextHotspot)}),200)},checkLineHeight:function(){var init=(calc={init:function(){var dotFirst=$(".path-list-item:nth-child(1)").find(".path-line").offset(),dotLast,lineHeight=$(".path-list-item:last-child").find(".path-line").offset().top-dotFirst.top,dotLine;$(".plan-path-v-line").css({height:lineHeight}).fadeIn()},resize:function(){$(window).resize((function(){calc.init()}))}},void setTimeout((function(){calc.init(),calc.resize()}),500)),calc},isLikeActive:function(item){var status=0;if($.each(MTR.articleLike,(function(index,like){like.category==item[0]&&$.each(like.detail,(function(idx,ct){ct.CategoryId==item[1]&&(status=0==ct.IsAbleToLike?1:0)}))})),1==status)return!0},isLikeActiveCnt:function(item){var cnt=0;return $.each(MTR.articleLike,(function(index,like){like.category==item[0]&&$.each(like.detail,(function(idx,ct){ct.CategoryId==item[1]&&(cnt=ct.TotalLike)}))})),cnt},aside:function(){var detailAgency=$(".ex-item-detail"),btnOpenAgency=$(".btn-agency"),btncloseAgency=$(".btn-agency-close"),cactive="active",detailPop={init:function(){detailAgency.css("visibility","hidden"),detailPop.open(),detailPop.close()},open:function(){btnOpenAgency.on("click",(function(){detailAgency.addClass(cactive).css("visibility","visible"),$(".agency-list").find("li:first-child a").focus()}))},close:function(){btncloseAgency.on("click",(function(){detailAgency.removeClass(cactive),setTimeout((function(){detailAgency.css("visibility","hidden")}),300),btnOpenAgency.focus()}))}};detailPop.init(),$(document).bind("keydown",(function(event){27===event.keyCode&&($(".ex-item-detail").removeClass("active"),setTimeout((function(){$(".ex-item-detail").css("visibility","hidden")}),300),$(".btn-agency").focus())}))},asideAfix:function(){var el=$(".external-link"),anchor=$(".btn-back-to-top"),pos={init:function(){pos.scroll(),setTimeout((function(){pos.check()}),1e3)},scroll:function(){$(window).scroll((function(){pos.check()})),$(window).resize((function(){el.removeAttr("style"),pos.check()}))},check:function(){var posAnchorTop=anchor.offset().top,h=el.height(),posTop=posAnchorTop-h,a=$(window).scrollTop()+$(window).height()-h,b=el.offset().top,e=b+h;pos.handle(posAnchorTop,e,h,posTop,a,b)},handle:function(posAnchorTop,e,h,posTop,a,b){e>=posAnchorTop&&el.css({position:"absolute",top:posTop,height:h}),a<b&&el.removeAttr("style")}};pos.init()},tablerow:function(idx,order){if(order==idx||order==idx-1)return!0},popupHotspotOpen:function(content){MTR.selected=content,$(".hsr-mask-custom, .hsr-popup").fadeIn(300),$(".btn-close-popup").focus(),$(document).bind("keydown",(function(event){27===event.keyCode&&MTR.popupHotspotClose()})),setTimeout((function(){$(".hotspot-detail-thumb").animate({opacity:1},500)}),250)},popupHotspotOpeninMap:function(content){setTimeout((function(){var ttt;$.each(MTR.articleList,(function(c,spot){var spotid=content[1];spot.HotspotId==spotid&&(ttt=new Array(spot),MTR.articleTitle=spot.Title)})),MTR.hotspotDetailinMap=ttt,$(".hsr-mask-custom, .hsr-popup").fadeIn(300),$(".btn-close-popup").focus(),$(document).bind("keydown",(function(event){27===event.keyCode&&MTR.popupHotspotClose()})),MTR.updateMeta(),paramUpdate.update("detail","1")}),50),setTimeout((function(){$(".hotspot-detail-thumb").animate({opacity:1},500)}),250)},popupHotspotClose:function(){$(".hsr-mask-custom, .hsr-popup").fadeOut(300),$(".hotspot-detail-thumb").animate({opacity:0},500),"hotspot"==MTR.pageid&&(MTR.articleTitle=""),MTR.updateMeta(),paramUpdate.remove("detail")},popupPlanClose:function(){$(".hsr-mask-custom, .hsr-popup").fadeOut(300),$(".hotspot-detail-thumb").animate({opacity:0},500),MTR.updateMeta()},popupSiteLink:function(cont){var show=cont;return String.prototype.startsWith||(String.prototype.startsWith=function(searchString,position){return position=position||0,this.indexOf(searchString,position)===position}),show=cont.toLowerCase().startsWith("htt")?'<a href="'+cont+'" target="_blank">'+cont+"</a>":cont.toLowerCase().startsWith("www")?'<a href="http://'+cont+'" target="_blank">'+cont+"</a>":cont},bannerType:function(type){return 3!=type&&4!=type},getHotspot:function(ids){var hotspots=ids.split(","),data=MTR.articleCate,selectedHotspot=[];for(let i=0;i<hotspots.length;i++){const spotId=hotspots[i];$.each(data,(function(i,d){$.each(d.City,(function(e,x){$.each(x.Hotspot,(function(c,h){spotId==h.HotspotId&&selectedHotspot.push(h)}))}))}))}return selectedHotspot}},computed:{articleListFilter:function(){this.listShow=6,this.listTotal=this.articleList.length;var resultMsg=$(".search-list .result-msg"),resultAutoBlock=$(".search-keyword_autoresult");resultMsg.css("display","none");var article=this.articleList,keyword,depth,cnt=0;return this.dropSelected.length<1||"all"==this.dropSelected?(keyword=this.searchkeyword,article.filter((function(item){if(-1!==item.tit.indexOf(keyword)||-1!==item.cateId.indexOf(keyword)||-1!==item.search_area.indexOf(keyword))return cnt++,item})),0==cnt?(resultMsg.css("display","block"),this.searchmessage=this.text.searchNoResult,article):keyword.length<1?(resultMsg.css("display","none"),article):(article=article.filter((function(item){if(-1!==item.tit.indexOf(keyword)||-1!==item.cateId.indexOf(keyword)||-1!==item.search_area.indexOf(keyword))return item}))).length<1?(resultMsg.css("display","block"),article):(resultAutoBlock.css("display","none"),this.listTotal=article.length,article)):(keyword=this.dropSelected,"1"==(depth=this.dropSelectedDepth)?(article.filter((function(item){if(-1!==item.cateId.indexOf(keyword))return cnt++,item})),0==cnt&&0==cnt?(this.searchmessage=this.text.searchNoResult,article):keyword.length<1?article:(article=article.filter((function(item){if(-1!==item.cateId.indexOf(keyword))return item}))).length<1?article:(this.listTotal=article.length,article)):"2"==depth?(article.filter((function(item){if(-1!==item.subcate.indexOf(keyword))return cnt++,item})),0==cnt&&0==cnt?(this.searchmessage=this.text.searchNoResult,article):keyword.length<1?article:(article=article.filter((function(item){if(-1!==item.subcate.indexOf(keyword))return item}))).length<1?article:(this.listTotal=article.length,article)):void 0)},hotspotDetail:function(){var day=this.dropSelected-1,details=this.articleDetail[0].plan[day].path,selected=this.selected;return details.filter((function(item){if(item.hotspot.id==selected)return item})),details=details.filter((function(item){if(item.hotspot.id==selected)return item}))},autosearch:function(){var article=this.articleList,keyword=this.searchkeywordAuto;return keyword||(keyword=this.text.searchPleaseInput),(article=article.filter((function(item){if(-1!==item.tit.indexOf(keyword)||-1!==item.search_area.indexOf(keyword))return item}))).length,article},autosearchHotspot:function(){var article=this.articleDetail,keyword=this.searchkeywordAuto,result=[];keyword||(keyword=this.text.searchPleaseInput);var page="./hotspot.html?",para="";return cnt=0,$.each(article,(function(i,tt){$.each(tt.City,(function(ad,dd){if(-1!==dd.CityName.toLowerCase().indexOf(keyword.toLowerCase())){var eee=article[i].City[ad];para="region="+tt.RegionId+"&city="+dd.CityId;var city={tit:dd.CityName,link:page+para,id:dd.CityId,type:"city"};result.push(city),cnt++}})),$.each(tt.City,(function(ad,dd){0!=dd.Hotspot.length&&$.each(dd.Hotspot,(function(bd,cc){if(-1!==cc.Title.toLowerCase().indexOf(keyword.toLowerCase())){para="region="+tt.RegionId+"&city="+dd.CityId+"&hotspot="+cc.HotspotId;var hotspot={tit:cc.Title,desc:dd.CityName,link:page+para,id:cc.HotspotId,type:"hotspot"};result.push(hotspot),cnt++}}))}))})),String.prototype.startsWith||(String.prototype.startsWith=function(searchString,position){return position=position||0,this.indexOf(searchString,position)===position}),this.searchkeywordAuto.startsWith(" ")?result=!1:0==cnt&&this.searchkeywordAuto.length>0?result=!1:result},cateList:function(){var catename,crr;return"all"==this.dropSelected?this.text.selectAll:"1"==MTR.dropSelectedDepth?($.each(this.articleCate,(function(index,item){item.cateId===MTR.dropSelected&&(crr=item.label)})),crr):"2"==MTR.dropSelectedDepth?($.each(this.articleCate,(function(index,item){$.each(item.subcate,(function(index,cate){cate===MTR.dropSelected&&(crr=cate)}))})),crr):void 0},dayList:function(){var day=this.dropSelected,order=new Number(day)-1;return this.checkHasHotspot(),this.checkLineHeight(),this.text.day[order]}},components:{hsrTop:hsrTop,hsrFoot:hsrFoot,hsrBreadcrumb:hasrBreadcrumb,hsrBreadcrumbPrev:hasrBtnGoToPrev,sectionTit:hsrSectionTit,btnCirlce:btnCircle,btnAngle:btnAngle,topBanner:hsrTopBanner,subTopBanner:hsrSubTopBanner,utilFontzoom:utilFontZoom,btnLoadmore:btnLoadMore}});